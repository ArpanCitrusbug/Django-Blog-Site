<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>



{% block body %}
<div class="container-fluid">
    <h1 class="sign_in" style="padding: 15px; padding-left: 790px;">Sign In</h1>
   
    
   
    <form class="row g-3" action="{% url 'home' %}"  method="post" onsubmit="">
        
        {% csrf_token %}
        
            <div class="mb-3" style="padding-left: 650px;">
                <label for="firstname" class="form-label">First Name</label>
                <input type="text" class="form-control" style="width: 450px;" id="FirstName"
                    aria-describedby="firstname" name="firstname">
            </div>
            <div class="mb-3" style="padding-left: 650px;">
                <label for="lastname" class="form-label">Last Name</label>
                <input type="text" name="lastname" class="form-control" style="width: 450px;" id="LastName" aria-describedby="lastname">
            </div>
            <div class="mb-3" style="padding-left: 650px;">
                <label class="form-label">Username</label>
                <input type="text" name="username" class="form-control" style="width: 450px;" id="exampleInputusername"
                    aria-describedby="emailHelp">
            </div>
            <div class="mb-3" style="padding-left: 650px;">
                <label class="form-label">Email address</label>
                <input type="email" name="email" class="form-control" style="width: 450px;" id="emailinput"
                    aria-describedby="emailHelp">
                <span class="emailFeedBackArea invalid-feedback"  id="emailmessage" style="display: none;"></span>
            </div>
            <div class="mb-3" style="padding-left: 650px;">
                <label for="exampleInputPassword1" class="form-label">Password</label>
                <input type="password" name="password1" class="form-control" style="width: 450px;" id="exampleInputPassword1">
            </div>
            <div class="mb-3" style="padding-left: 650px;">
                <label for="exampleInputPassword2" class="form-label">Confirm Password</label>
                <input type="password" name="password2" class="form-control" style="width: 450px;" id="exampleInputPassword2">
            </div>
            <div class="submit-btn" style="padding-left: 650px;">

                <input type="submit" style="width: 450px;" id="submit" value="submit" class="btn btn-primary">
            </div>

            <div style="text-align: center; padding-top: 10px;">
                <p>Already a user? <a href="/login">Log In</a></p>

            </div>
        </form>

</div>

<script>
const emailinput = document.querySelector("#emailinput");
const emailFeedBackArea = document.querySelector(".emailFeedBackArea")
const emailFormat= /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

emailinput.addEventListener('keyup', (e)=>{
   const emailVal = e.target.value;

   emailinput.classList.remove("is-valid");
   emailFeedBackArea.style.display = "none";

   if (emailVal.length > 0 || emailFormat.test(emailVal) == false) {
       fetch('/validateemail', {
           body: JSON.stringify({ email: emailVal }),
           method: "POST",
       })
           .then((res) => res.json())
           .then((data) => {
               console.log("data",data);
               if (data.email_error) {
                   emailinput.classList.add("is-valid");
                   feedBackArea.style.display = "block";
                   feedBackArea.innerHTML = `<p>${data.email_error}</p>`;
               }
           })
   }
})


</script>





<!-- <script>
        let email_error = true

function emailValidation() {
    let email = $("#emailinput").val();
    let mailformat = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    if (email == "") {
        $("#emailmessage").text("Please Enter Your Email.");
        email_error = false;
    }
    else if(mailformat.test(email) == false) {
        $("#emailmessage").text("Please Enter Valid email")
        email_error = false;
    }
    else {
        $("#emailmessage").text("");
        email_error = true;
    }

}

$('#submit').click(function(e){
console.log("gergeger");
    e.preventDefault();
    emailValidation();
    if(email_error == true) {
        return true;
    }
    else{
        return false;
    }
});

</script> -->

{% endblock %}